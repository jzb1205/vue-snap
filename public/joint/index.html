<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style type="text/css">
			#old {
				width: 400px;
				height: 400px;
				border: blue 1px solid;
				position: absolute;
				margin: 50px 50px;
			}

			#svg {
				width: 100%;
				height: 100%;
				border: red 1px solid;
				position: absolute;
			}
		</style>
		<script src="./jquery.js" type="text/javascript" charset="utf-8"></script>
	</head>
	<body>
		<div id="old">
			<svg id="svg">
				<g id="g">
					<rect id="1" x="0" width="40" height="40" style="fill:black;" />
					<rect id="2" x="40" width="40" height="40" style="fill:red;" />
					<rect id="3" x="80" width="40" height="40" style="fill:green;" />
					<rect id="4" x="0" y="40" width="40" height="40" style="fill:blue;" />
					<rect id="5" x="40" y="40" width="40" height="40" style="fill:yellow;" />
					<rect id="6" x="80" y="40" width="40" height="40" style="fill:pink;" />
				</g>
			</svg>
		</div>
		<script type="text/javascript">
			$(function() {
				let proportion = 1;
				let mouseleft;
				let mousetop;
				//oX,oY是svg距离父元素(div)的偏移量,这里固定为0;
				let oX = 0;
				let oY = 0;
				//移动鼠标,获得在DIV中的坐标
				$("#old").mousemove(function(e) {
					var e = e || window.event;
					mouseleft = e.offsetX ? e.offsetX :
						e.originalEvent.layerX;
					mousetop = e.offsetY ? e.offsetY :
						e.originalEvent.layerY;
				});
				$('#svg').onmousewheel = function(e) {
					function getCount(delta, num) {
						if (delta > 0) {
							num = num * 1.15;
						} else {
							num = num / 1.15;
						}
						return num;
					};
					var delta = 0;
					if (!event) event = window.event;
					if (event.wheelDelta) {
						delta = event.wheelDelta / 120;
						alert(delta);
					} else if (event.detail) {
						delta = -event.detail / 3;
					}
					proportion = getCount(delta, proportion);
					let centerOffsetX = (proportion - 1) * mouseleft;
					let centerOffsetY = (proportion - 1) * mousetop;
					console.log(oX, centerOffsetX, oY, centerOffsetY, proportion)
					$("#g").attr({
						"transform": "translate(" + (oX - centerOffsetX) + "," + (oY - centerOffsetY) +
							"),scale(" + proportion + ")"
					});
				}
			})
		</script>
	</body>
</html>
